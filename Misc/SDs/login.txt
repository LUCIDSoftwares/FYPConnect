title Login Sequence Diagram



participant "LoginScreenController" as G
database "Database" as B #yellow
participant "UserSession" as F
participant "LoginService" as C
participant "ConcretePersistanceFactory" as D
participant "ConcreteUserFactory" as E


[->G: login(username, password)
activate G
G->C: login(username, password)
activate C
C->D: createPersistanceHandler("DBHandler")
activate D
D-->C: return DBHandler instance
deactivate D
C->B: retrieveUser(username, password)
activate B
B-->C: return User data
deactivate B
C->E: createUser(ResultSet)
activate E
E-->C: return User (Student/Faculty/Admin)
deactivate E

alt user exists (user != null)
    C->F: set currentUser(User)
    activate F
    G->G: openScreen(userType, username)
else invalid user (user == null)
    C->G: displayError("Invalid username or password")
end
